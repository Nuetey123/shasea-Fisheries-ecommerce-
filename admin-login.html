<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Login - Fish Shop</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
  body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #0f172a, #1e3a8a);
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .login-box {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(12px);
    border-radius: 15px;
    padding: 2.5rem;
    width: 350px;
    box-shadow: 0 8px 30px rgba(0,0,0,0.3);
    text-align: center;
    color: white;
    animation: fadeIn 0.8s ease-in-out;
  }
  h2 {
    margin-bottom: 1.5rem;
    font-weight: 600;
    font-size: 1.8rem;
    color: #facc15;
  }
  input {
    width: 100%;
    padding: 0.9rem;
    margin-bottom: 1rem;
    border: none;
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.15);
    color: white;
    font-size: 1rem;
    outline: none;
    transition: 0.3s ease;
  }
  input::placeholder { color: rgba(255, 255, 255, 0.7); }
  input:focus {
    background: rgba(255, 255, 255, 0.25);
    box-shadow: 0 0 10px rgba(250, 204, 21, 0.8);
  }
  button {
    width: 100%;
    padding: 0.9rem;
    background: #facc15;
    color: #1e293b;
    font-weight: 600;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: 0.3s ease;
  }
  button:hover {
    background: #eab308;
    transform: translateY(-2px);
  }
  .error {
    color: #f87171;
    font-size: 0.9rem;
    margin-top: 0.5rem;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>
</head>
<body>

<div class="login-box">
  <h2>Admin Login</h2>
  <input type="email" id="email" placeholder="Email">
  <input type="password" id="password" placeholder="Password">
  <button id="loginBtn">Login</button>
  <div class="error" id="errorMsg"></div>
</div>

<!-- Supabase Login Script -->
<script type="module">
  import { createClient } from 'https://esm.sh/@supabase/supabase-js@2'

  const supabaseUrl = 'https://ripzmgoqtpsejmyzkhde.supabase.co'
  const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJpcHptZ29xdHBzZWpteXpraGRlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUxMTc4NTgsImV4cCI6MjA3MDY5Mzg1OH0.OH-HTDASDnuWZ9lbPtttWqXBszgyvP5KtVfmj04R8Ck' 
  const supabase = createClient(supabaseUrl, supabaseKey)

  document.getElementById('loginBtn').addEventListener('click', async () => {
    const email = document.getElementById('email').value.trim()
    const password = document.getElementById('password').value.trim()
    const errorMsg = document.getElementById('errorMsg')

    errorMsg.textContent = "" // Clear previous errors

    if (!email || !password) {
      errorMsg.textContent = "Please enter both email and password."
      return
    }

    try {
      const { data, error } = await supabase.auth.signInWithPassword({
        email,
        password
      })

      if (error) {
        errorMsg.textContent = "Login failed: " + error.message
        return
      }

      // Success message
      const message = document.createElement("div");
      message.textContent = "Login successful!";
      message.style.position = "fixed";
      message.style.top = "50%";
      message.style.left = "50%";
      message.style.transform = "translate(-50%, -50%)";
      message.style.background = "#4CAF50";
      message.style.color = "white";
      message.style.padding = "15px 20px";
      message.style.fontSize = "15px";
      message.style.borderRadius = "8px";
      message.style.boxShadow = "0 4px 8px rgba(0,0,0,0.1)";
      message.style.zIndex = "9999";
      document.body.appendChild(message);

      setTimeout(() => {
        window.location.href = "admin-dashboard.html";
      }, 1200);

    } catch (err) {
      errorMsg.textContent = "Network error: Please check your internet connection."
    }
  })
</script>
</body>
</html>
